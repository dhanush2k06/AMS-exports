<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMS Exports | Handcrafted Goods</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Tailwind is loaded via CDN (https://cdn.tailwindcss.com) so build directives (@tailwind / @apply)
           are not processed in the browser; replace them with standard CSS equivalents. */

        /* Custom Styles for Professional, Upscale Look */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #fcfcfc; /* Near White */
            color: #1c1c1c; /* Charcoal Black */
        }
        h1, h2, h3, h4 {
            font-family: 'Playfair Display', serif;
        }
        .container {
            max-width: 1300px;
        }
        /* Color Palette: #4A3222 (Espresso Brown), #A0522D (Aged Tan), #1c1c1c (Charcoal) */
        .text-primary { color: #4A3222; }
        .bg-primary { background-color: #4A3222; }
        .hover\:bg-primary-dark:hover { background-color: #3b281c; }

        /* Converted @apply utilities into plain CSS for browser usage */
        .btn-primary {
            background-color: #4A3222;
            color: #ffffff;
            font-weight: 600;
            padding: 0.75rem 1.5rem; /* py-3 px-6 */
            border-radius: 0.125rem; /* rounded-sm */
            transition: background-color 0.3s, box-shadow 0.3s;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
            letter-spacing: 0.04em; /* approximate tracking-wider */
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn-primary:hover {
            background-color: #3b281c;
        }

        .btn-secondary {
            background-color: #ffffff;
            border: 1px solid #d1d5db; /* gray-300 */
            color: #4b5563; /* gray-700 */
            font-weight: 600;
            padding: 0.75rem 1.5rem; /* py-3 px-6 */
            border-radius: 0.125rem; /* rounded-sm */
            transition: background-color 0.3s, color 0.3s;
            letter-spacing: 0.04em; /* approximate tracking-wider */
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn-secondary:hover {
            background-color: #f9fafb; /* gray-50 */
        }

        .product-card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.08);
        }
        .review-card {
            flex: 0 0 auto;
            width: 90%;
            margin-right: 2rem;
            scroll-snap-align: start; /* Ensure smooth snapping */
        }
        .review-slider-container {
            overflow-x: hidden; /* Hide scrollbar for cleaner auto-slide look */
            scroll-behavior: smooth;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header (Sleek and Minimal) -->
    <header class="bg-white shadow-sm sticky top-0 z-50 border-b border-gray-100">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- Brand Logo -->
            <a href="#home" class="flex items-center">
                <img src="media/logo.jpg" alt="AMS Logo" class="h-12 w-20">
            </a>

            <!-- Navigation Links (Desktop) -->
            <nav class="hidden md:flex space-x-10 text-base font-medium tracking-wide">
                <a href="#about" class="hover:text-primary transition duration-150">About</a>
                <a href="#products" class="hover:text-primary transition duration-150">Products</a>

                <a href="#contact" class="hover:text-primary transition duration-150">Contact Us</a>
            </nav>

            <!-- Profile and Cart Icons -->
            <div class="flex space-x-6 items-center">
            <!-- Call Logo -->
            <a href="tel:+917305632131" class="text-2xl text-gray-700 hover:text-primary transition duration-150" aria-label="Call Us">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                </svg>
            </a>
            <!-- Mail Logo -->
            <a href="mailto:dhanushharidoss47@gmail.com" class="text-2xl text-gray-700 hover:text-primary transition duration-150" aria-label="Email Us">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
            </a>
            
                <!-- Cart Logo -->
                <a href="#cart" class="relative text-2xl text-gray-700 hover:text-primary transition duration-150" aria-label="Shopping Cart">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                    <span id="cart-count" class="absolute -top-3 -right-3 text-xs bg-red-600 text-white rounded-full h-5 w-5 flex items-center justify-center font-bold">0</span>
                </a>
                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="md:hidden text-2xl text-gray-700 hover:text-primary">&#9776;</button>
            </div>
        </div>
        
        <!-- Mobile Navigation (Hidden by default) -->
        <nav id="mobile-menu" class="hidden md:hidden bg-gray-50 border-t border-gray-200">
            <a href="#home" class="block py-3 px-6 text-lg hover:bg-gray-100 border-b">Home</a>
            <a href="#products" class="block py-3 px-6 text-lg hover:bg-gray-100 border-b">Products</a>
            <a href="#reviews" class="block py-3 px-6 text-lg hover:bg-gray-100 border-b">Review</a>
            <a href="#contact" class="block py-3 px-6 text-lg hover:bg-gray-100">Contact Us</a>
        </nav>
    </header>

    <!-- Main Content Container (SPA View) -->
    <div id="app-container" class="flex-grow">
        <!-- Home View -->
        <section id="home-view" class="pt-8">
            
            <!-- 1. Hero Section (Static) -->
            <section class="mb-20">
                <div class="relative mx-auto container px-6 shadow-xl rounded-lg overflow-hidden">
                    <div class="h-[60vh] md:h-[80vh] bg-cover bg-center flex items-center justify-center" style="background-image: url('media/bags_cover.jpg'); background-position: center;">
                        <div class="text-center p-8 rounded-lg bg-black bg-opacity-30">
                            <h2 class="text-3xl md:text-7xl font-light text-white mb-4 tracking-wider">
                                Timeless Elegance in Every Stitch. <br> Unleash Your Style!
                            </h2>
                            <p class="text-base md:text-xl text-gray-200 mb-8 font-light tracking-widest uppercase">
                                Discover Premium Leather Goods. <br><b>Call 9884052072 or 9884396696</b> for Exclusive Deals!
                            </p>
                            <a href="#products" class="btn-primary px-12 py-2 text-xl">Discover</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 4. Imported Leathers -->
            <section id="imported-leathers-section" class="bg-white py-16">
                <div class="container mx-auto px-6">
                    <h3 class="text-4xl font-light text-center mb-12 text-primary tracking-widest uppercase">Imported Leathers</h3>

                    <div id="imported-leathers-container" class="space-y-12">
                        <!-- Leathers will be generated by JS -->
                    </div>
                </div>
            </section>

            <!-- 2. Categories (Simplified Grid - Updated with stock images) -->
            <section id="categories" class="container mx-auto px-6 mb-20">
                <h3 class="text-4xl font-light text-center mb-12 text-primary tracking-widest uppercase">The Collections</h3>
                <div class="grid grid-cols-2 md:grid-cols-5 gap-8">
                    <!-- Category Card Template -->

                    <a href="#products?category=Leather+Goods" class="group block text-center shadow-lg rounded-sm overflow-hidden bg-white transition duration-300 hover:shadow-xl">
                        <img src="media/leather_cover.jpg" alt="Leather Goods" class="w-full h-48 object-cover object-center transition duration-500 group-hover:scale-105">
                        <div class="py-4 border-t border-gray-100">
                            <p class="font-semibold text-lg text-charcoal group-hover:text-primary tracking-wide">Leather Goods</p>
                        </div>
                    </a>

                    <a href="#products?category=Bags" class="group block text-center shadow-lg rounded-sm overflow-hidden bg-white transition duration-300 hover:shadow-xl">
                        <img src="media/bags_cover.jpg" alt="Bags" class="w-full h-48 object-cover object-center transition duration-500 group-hover:scale-105">
                        <div class="py-4 border-t border-gray-100">
                            <p class="font-semibold text-lg text-charcoal group-hover:text-primary tracking-wide">Bags</p>
                        </div>
                    </a>

                    <a href="#products?category=Wallets" class="group block text-center shadow-lg rounded-sm overflow-hidden bg-white transition duration-300 hover:shadow-xl">
                        <img src="media/wallet_cover.jpg" alt="Wallets" class="w-full h-48 object-cover object-center transition duration-500 group-hover:scale-105">
                        <div class="py-4 border-t border-gray-100">
                            <p class="font-semibold text-lg text-charcoal group-hover:text-primary tracking-wide">Wallets</p>
                        </div>
                    </a>
                    <a href="#products?category=Shoes" class="group block text-center shadow-lg rounded-sm overflow-hidden bg-white transition duration-300 hover:shadow-xl">
                        <img src="media/shoes_cover.jpg" alt="Shoes" class="w-full h-48 object-cover object-center transition duration-500 group-hover:scale-105">
                        <div class="py-4 border-t border-gray-100">
                            <p class="font-semibold text-lg text-charcoal group-hover:text-primary tracking-wide">Shoes</p>
                        </div>
                    </a>

                    <a href="#products?category=Belts" class="group block text-center shadow-lg rounded-sm overflow-hidden bg-white transition duration-300 hover:shadow-xl">
                        <img src="media/belt_cover.webp" alt="Belts" class="w-full h-48 object-cover object-center transition duration-500 group-hover:scale-105">
                        <div class="py-4 border-t border-gray-100">
                            <p class="font-semibold text-lg text-charcoal group-hover:text-primary tracking-wide">Belts</p>
                        </div>
                    </a>
                </div>
            </section>

            <!-- 3. Customer Reviews Slider (Auto-Sliding) -->
            <section id="reviews-section" class="bg-gray-100 py-16">
                <div class="container mx-auto px-6 relative group">
                    <h3 class="text-4xl font-light text-center mb-12 text-charcoal tracking-widest uppercase">Testimonials</h3>
                    
                    <div id="review-slider-wrapper" class="relative overflow-hidden">
                        <div id="review-slider" class="review-slider-container flex flex-nowrap pb-4 snap-x snap-mandatory">
                            <!-- Review Cards will be generated by JS -->
                        </div>
                    </div>

                    <!-- Navigation Buttons (Optional manual override) -->
                    <div class="flex justify-center mt-8 space-x-4">
                        <button onclick="scrollReviews(-1)" class="p-3 bg-white rounded-full shadow-lg text-primary hover:bg-primary hover:text-white transition duration-200 border border-gray-200" aria-label="Previous Review">&#9664;</button>
                        <button onclick="scrollReviews(1)" class="p-3 bg-white rounded-full shadow-lg text-primary hover:bg-primary hover:text-white transition duration-200 border border-gray-200" aria-label="Next Review">&#9654;</button>
                    </div>
                </div>
            </section>
        </section>
        
        <!-- Placeholder for Products and Cart Views -->
        <section id="products-view" class="container mx-auto px-6 py-16 hidden">
            <!-- Content will be rendered by renderProductsView() -->
        </section>

        <section id="cart-view" class="container mx-auto px-6 py-16 hidden">
            <!-- Content will be rendered by renderCartView() -->
        </section>
    </div>

    <!-- Footer (Dark, Rich, and Formal) -->
    <footer class="bg-[#1c1c1c] text-gray-400 py-12 mt-auto border-t border-gray-800" id="contact">
        <div class="container mx-auto px-6 grid grid-cols-1 md:grid-cols-5 gap-10">
            <!-- Brand Info -->
            <div>
                <h4 class="text-2xl font-extrabold text-white mb-4 tracking-widest uppercase" style="font-family: 'Playfair Display', serif;">AMS</h4>
                <p class="text-sm">We craft pieces designed to last a lifetime, blending timeless design with sustainable practices. Located in the heart of Florence.</p>
            </div>

            <!-- Navigation Links -->
            <div>
                <h4 class="text-xl font-semibold text-white mb-4">Quick Links</h4>
                <ul class="space-y-2 text-sm">
                    <li><a href="#about" class="hover:text-primary transition duration-150">Our Heritage</a></li>
                    <li><a href="#products" class="hover:text-primary transition duration-150">Shop All</a></li>
                    <li><a href="#" class="hover:text-primary transition duration-150">Customer Support</a></li>
                </ul>
            </div>

            <!-- Legal/Info Links -->
            <div>
                <h4 class="text-xl font-semibold text-white mb-4">Legal</h4>
                <ul class="space-y-2 text-sm">
                    <li><a href="#" class="hover:text-primary transition duration-150">Privacy Policy</a></li>
                    <li><a href="#" class="hover:text-primary transition duration-150">Terms of Service</a></li>
                    <li><a href="#" class="hover:text-primary transition duration-150">Shipping & Returns</a></li>
                </ul>
            </div>

            <!-- Social Handles -->
            <div>
                <h4 class="text-xl font-semibold text-white mb-4">Follow Us</h4>
                <div class="flex space-x-4 text-xl">
                    <a href="#" class="hover:text-primary transition duration-150" aria-label="Instagram"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></a>
                    <a href="#" class="hover:text-primary transition duration-150" aria-label="Facebook"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg></a>
                </div>
            </div>

            <!-- Leave a Review -->
            <div>
                <h4 class="text-xl font-semibold text-white mb-4">Leave a Review</h4>
                <form id="review-form" class="space-y-3">
                    <input type="text" name="name" placeholder="Your Name" required class="w-full p-2 bg-gray-800 border border-gray-600 rounded-sm text-white placeholder-gray-400 focus:ring-primary focus:border-primary">
                    <input type="email" name="email" placeholder="Your Email" required class="w-full p-2 bg-gray-800 border border-gray-600 rounded-sm text-white placeholder-gray-400 focus:ring-primary focus:border-primary">
                    <textarea name="message" placeholder="Your Review" required class="w-full p-2 bg-gray-800 border border-gray-600 rounded-sm text-white placeholder-gray-400 focus:ring-primary focus:border-primary h-20 resize-none"></textarea>
                    <button type="submit" class="btn-primary w-full py-2 text-sm">Submit Review</button>
                </form>
            </div>
        </div>
        <div class="text-center mt-10 pt-6 border-t border-gray-800">
            <p class="text-xs text-gray-500 tracking-wider">&copy; 2025 AMS. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Constants for reusable elements
        const WHATSAPP_ICON = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/></svg>`;
        const PLACEHOLDER_IMAGE = 'https://placehold.co/300x300/4A3222/ffffff?text=Image+Missing';

        // --- 1. Product Data and Definitions (Updated with Stock Images) ---
        const PRODUCTS = [
            // Leather Goods
            { id: 1, name: "Premium Cowhide Square", price: 85, category: "Leather Goods", material: "Cow", type: "Raw", image: "media/leather_cover.jpg", description: "High-quality cowhide leather square, perfect for crafting premium leather goods. Sourced from top tanneries for durability and elegance." },
            { id: 2, name: "Goat Leather Panel", price: 70, category: "Leather Goods", material: "Goat", type: "Raw", image: "media/leather_cover.jpg", description: "Soft and supple goat leather panel, ideal for versatile leather projects. Known for its flexibility and rich texture." },
            { id: 3, name: "Sheepskin Lining Fabric", price: 60, category: "Leather Goods", material: "Sheep", type: "Raw", image: "media/leather_cover.jpg", description: "Luxurious sheepskin lining fabric, providing warmth and comfort. Excellent for interior linings and accessories." },
            // Bags
            { id: 4, name: "Metropolitan Briefcase", price: 349, category: "Bags", type: "Briefcases", material: "Calf", image: "media/Men/bags/laptop_bag1.jpg", sizeChart: "media/officebag_sizechart.jpg", description: "Elegant calf leather briefcase designed for the modern professional. Features multiple compartments, padded laptop sleeve, and premium hardware." },
            { id: 5, name: "The Explorer Duffle", price: 289, category: "Bags", type: "Duffle bags", material: "Cow", image: "media/Men/bags/duffle_bags.jpg", sizeChart: "media/duffle_bag_sizechart.jpg", description: "Rugged cow leather duffle bag built for adventure. Spacious interior with reinforced straps and weather-resistant finish." },
            { id: 6, name: "Sleek Cross-body", price: 169, category: "Bags", type: "Cross-body bags", material: "Goat", image: "media/Men/bags/crossbody_bags.jpg", sizeChart: "media/crossbodybag_sizechart.jpg", description: "Stylish goat leather cross-body bag with adjustable strap. Perfect for everyday carry with secure zippered compartments." },
            { id: 15, name: "Laptop Bag", price: 199, category: "Bags", type: "Laptop bags", material: "Cow", image: "media/Men/bags/laptop_bag2.jpg", sizeChart: "media/laptopbag_sizechart.jpg", description: "Professional cow leather laptop bag with dedicated padding. Features organized pockets and sleek design for business travel." },
            { id: 16, name: "iPad Bag", price: 149, category: "Bags", type: "iPad bags", material: "Goat", image: "media/Men/bags/laptop_bag3.jpg", sizeChart: "media/laptopbag_sizechart.jpg", description: "Compact goat leather iPad bag with soft interior lining. Ideal for protecting and carrying your tablet with style." },
            { id: 17, name: "Sling Bag", price: 129, category: "Bags", type: "Sling bags", material: "Sheep", image: "media/Men/bags/sling_bag1.jpg", sizeChart: "media/wmens_slingbag_sizechart.jpg", description: "Casual sheep leather sling bag with cross-body strap. Features multiple compartments for essentials and comfortable wear." },
            // Wallets
            { id: 7, name: "Executive Card Holder", price: 45, category: "Wallets", type: "Card Holder", material: "Cow", image: "media/Men/wallets/wallet_men1.jpg", sizeChart: "media/mens_wallet_sizechart.jpg", description: "Slim cow leather card holder with RFID protection. Holds up to 8 cards with a sleek, minimalist design." },
            { id: 8, name: "Classic Bifold Wallet", price: 79, category: "Wallets", type: "Bifold", material: "Calf", image: "media/Women/wallets/wallet_women3.jpg", sizeChart: "media/mens_wallet_sizechart.jpg", description: "Timeless calf leather bifold wallet with multiple card slots and bill compartments. Crafted for durability and style." },
            // Shoes
            { id: 9, name: "Hand-Stitched Oxford", price: 299, category: "Shoes", type: "Oxfords", material: "Calf", image: "media/Men/shoes/shoes_men1.jpg", description: "Hand-stitched calf leather Oxford shoes with Goodyear welt construction. Features lace-up design and premium comfort." },
            { id: 10, name: "The Brogue Wingtip", price: 319, category: "Shoes", type: "Brogues", material: "Cow", image: "media/Men/shoes/shoes_men2.jpg", description: "Classic cow leather brogue wingtip shoes with perforated detailing. Perfect for formal occasions with lasting quality." },
            { id: 18, name: "Classic Derby", price: 309, category: "Shoes", type: "Derby", material: "Goat", image: "media/Men/shoes/shoes_men3.jpg", description: "Elegant goat leather Derby shoes with open lacing. Offers comfort and versatility for professional and casual wear." },
            // Belts
            { id: 11, name: "Full-Grain Dress Belt", price: 95, category: "Belts", type: "Dress Belt", material: "Cow", image: "media/Men/belts/belt.jpg", description: "Premium cow leather full-grain dress belt with brass buckle. Features vegetable-tanned leather for natural patina." },
            { id: 12, name: "Casual Suede Belt", price: 75, category: "Belts", type: "Suede Belt", material: "Sheep", image: "media/Men/belts/belt.jpg", description: "Soft sheep suede belt with nickel buckle. Ideal for casual wear with a textured, natural finish." },
            { id: 19, name: "Top Grain Finish Belt", price: 85, category: "Belts", type: "Top Grain", material: "Cow", image: "media/Men/belts/belt.jpg", description: "Cow leather top grain belt with smooth finish and sturdy buckle. Versatile for both formal and casual styles." },
            { id: 20, name: "Embossed Finish Belt", price: 90, category: "Belts", type: "Embossed", material: "Goat", image: "media/Men/belts/belt.jpg", description: "Goat leather belt with intricate embossed patterns. Adds a unique, artistic touch to any outfit." },
            { id: 21, name: "Printed Finish Belt", price: 80, category: "Belts", type: "Printed", material: "Sheep", image: "media/Men/belts/belt.jpg", description: "Sheep leather belt with printed design and metal buckle. Combines functionality with creative expression." },
            { id: 22, name: "Natural Finished Belt", price: 88, category: "Belts", type: "Natural", material: "Cow", image: "media/Men/belts/belt.jpg", description: "Cow leather belt with natural, untreated finish. Develops beautiful patina over time for a vintage look." },
            { id: 23, name: "Burnished Finished Belt", price: 92, category: "Belts", type: "Burnished", material: "Goat", image: "media/Men/belts/belt.jpg", description: "Goat leather belt with burnished edges and polished buckle. Offers a refined, handcrafted appearance." },
            { id: 24, name: "Plain Smooth Finish Belt", price: 78, category: "Belts", type: "Plain Smooth", material: "Sheep", image: "media/Men/belts/belt.jpg", description: "Sheep leather belt with plain smooth finish and simple buckle. Clean, minimalist design for everyday use." },
            // More Products
            { id: 13, name: "Travel Passport Wallet", price: 85, category: "Wallets", type: "Travel", material: "Goat", image: "media/Women/wallets/wallet_women6.jpg", sizeChart: "media/mens_wallet_sizechart.jpg", description: "Compact goat leather passport wallet with secure compartments. Perfect for travel with RFID blocking technology." },
            { id: 14, name: "Ladies Mini Clutch", price: 129, category: "Bags", type: "Clutch", material: "Sheep", image: "media/Women/handbags/handbag5.jpg", sizeChart: "media/ladies_wallet_sizechart.jpg", description: "Elegant sheep leather mini clutch with magnetic closure. Features interior pockets and detachable strap." },
        ];

        const REVIEWS = [
            { id: 1, name: "Alexander R.", rating: 5, text: "The Duffle Bag is an absolute masterpiece. The calf leather and stitching are unparalleled. A true investment piece." },
            { id: 2, name: "Sara K.", rating: 5, text: "My Oxford shoes are the most comfortable formal footwear I own. The craftsmanship shows in every detail. Highly recommended." },
            { id: 3, name: "Julian M.", rating: 4, text: "Got the Bifold Wallet. Exceptional quality, though the color was slightly darker than I expected. Still perfect." },
            { id: 4, name: "Chloe W.", rating: 5, text: "The Metropolitan Briefcase elevates my entire look. Elegant, functional, and built to last a lifetime. Worth every cent." },
            { id: 5, name: "James D.", rating: 5, text: "I ordered a custom belt and the leather quality is far superior to anything I've found in stores." },
        ];

        const IMPORTED_LEATHERS = [
            { name: "Cow Leather", image: "media/cow_leather.jpg", description: "Premium cowhide leather sourced from top tanneries in Europe and South America. Known for its durability, versatility, and rich texture, perfect for crafting high-quality bags, belts, and upholstery. Available in various thicknesses and finishes to suit your specific needs." },
            { name: "Goat Leather", image: "media/goat_leather.jpg", description: "Exquisite goat leather imported from Argentina and Brazil. Renowned for its supple feel, natural grain, and excellent dye absorption, making it ideal for luxury wallets, shoes, and apparel. Offers a unique blend of strength and elegance." },
            { name: "Sheep Leather", image: "media/sheep_leather.webp", description: "Luxurious sheepskin leather from European suppliers. Features a soft, velvety nap with natural insulating properties. Perfect for linings, jackets, and accessories where comfort and warmth are paramount. Available in various grades for different applications." }
        ];

        // --- 2. Cart Management (using LocalStorage) ---
        let cart = JSON.parse(localStorage.getItem('leatherCraftCart')) || [];

        function saveCart() {
            localStorage.setItem('leatherCraftCart', JSON.stringify(cart));
            updateCartCount();
            if (window.location.hash === '#cart') {
                renderCartView();
            }
        }

        function updateCartCount() {
            const count = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cart-count').textContent = count;
        }

        function addToCart(productId) {
            const product = PRODUCTS.find(p => p.id === productId);
            if (!product) return;

            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            saveCart();
            showToast(`${product.name} added to cart.`, 'success');
        }

        function updateCartItemQuantity(productId, newQuantity) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                const qty = parseInt(newQuantity);
                if (qty <= 0 || isNaN(qty)) {
                    cart = cart.filter(i => i.id !== productId);
                } else {
                    item.quantity = qty;
                }
                saveCart();
            }
        }

        function clearCart() {
            showConfirmationModal("Are you sure you want to empty your cart?", () => {
                cart = [];
                saveCart();
                renderCartView();
                showToast("Cart has been cleared.", 'info');
            });
        }
        
        // --- Custom Modal/Toast Functions ---
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.textContent = message;
            
            let color = 'bg-gray-800';
            if (type === 'success') color = 'bg-green-600';
            if (type === 'error') color = 'bg-red-600';

            toast.className = `fixed bottom-5 right-5 ${color} text-white px-5 py-3 rounded-md shadow-2xl z-[9999] transition duration-300 opacity-95`;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.classList.add('opacity-0');
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        }

        function showConfirmationModal(message, onConfirm) {
            const modalHTML = `
                <div id="custom-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000]">
                    <div class="bg-white p-8 rounded-lg shadow-2xl max-w-sm w-full">
                        <h4 class="text-xl font-semibold mb-4 text-primary">Confirmation</h4>
                        <p class="mb-6">${message}</p>
                        <div class="flex justify-end space-x-3">
                            <button id="modal-cancel" class="btn-secondary py-2 px-4 text-sm">Cancel</button>
                            <button id="modal-confirm" class="btn-primary py-2 px-4 text-sm">Confirm</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            const modal = document.getElementById('custom-modal');

            document.getElementById('modal-cancel').onclick = () => modal.remove();
            document.getElementById('modal-confirm').onclick = () => {
                onConfirm();
                modal.remove();
            };
        }


        // --- 3. View Rendering & Routing ---
        function router() {
            const hash = window.location.hash || '#home';
            const views = {
                'home': document.getElementById('home-view'),
                'products': document.getElementById('products-view'),
                'cart': document.getElementById('cart-view'),
                'about': document.getElementById('home-view'),
                'reviews': document.getElementById('home-view'),
                'contact': document.getElementById('home-view'),
            };
            
            Object.values(views).forEach(v => v.classList.add('hidden'));

            const viewKey = hash.split('?')[0].substring(1); 
            
            if (views[viewKey]) {
                views[viewKey].classList.remove('hidden');
            } else if (views['home']) {
                views['home'].classList.remove('hidden');
            }

            if (viewKey === 'products') {
                renderProductsView(hash);
            } else if (viewKey === 'cart') {
                renderCartView();
            }
            
            if (viewKey === 'reviews' || viewKey === 'contact' || viewKey === 'about') {
                const section = document.getElementById(viewKey === 'reviews' ? 'reviews-section' : viewKey);
                if (section) {
                    section.scrollIntoView({ behavior: 'smooth' });
                }
            }
        }

        // --- Products View Logic ---
        function renderProductsView(hash, overrideSearchTerm = null, updateOnlyGrid = false) {
    const container = document.getElementById('products-view');
    let searchTerm = '';

    // Check for search query in hash or override
    if (overrideSearchTerm !== null) {
        searchTerm = overrideSearchTerm;
    } else {
        const urlParams = new URLSearchParams(hash.split('?')[1] || '');
        searchTerm = urlParams.get('search') || '';
    }

    // Filter products based on search term
    const filteredProducts = searchTerm ? PRODUCTS.filter(p =>
        p.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
        p.category.toLowerCase().includes(searchTerm.toLowerCase()) ||
        p.material.toLowerCase().includes(searchTerm.toLowerCase())
    ) : PRODUCTS;

    if (updateOnlyGrid) {
        // Update only the product count and grid
        document.getElementById('product-count').textContent = `${filteredProducts.length} Products`;
        document.getElementById('products-grid').innerHTML = filteredProducts.map(p => `
            <div class="product-card bg-white p-4 md:p-6 rounded-lg shadow-lg flex flex-col justify-between border border-gray-100">
                <div class="relative mb-4">
                    <div id="product-slideshow-${p.id}" class="relative h-48 rounded-sm overflow-hidden">
                        <img src="${p.image}" alt="${p.name}" class="w-full h-full object-cover" onclick="magnifyImage(this.src)" onerror="this.onerror=null; this.src='https://placehold.co/300x300/4A3222/ffffff?text=Image+Missing';">
                        ${p.sizeChart ? `<img src="${p.sizeChart}" alt="${p.name} Size Chart" class="w-full h-full object-cover hidden" onclick="magnifyImage(this.src)" onerror="this.onerror=null; this.src='https://placehold.co/300x300/4A3222/ffffff?text=Image+Missing';">` : ''}
                    </div>
                    ${p.sizeChart ? `<div id="product-nav-${p.id}" class="flex justify-center mt-2 space-x-1">
                        <button onclick="showProductSlide(${p.id}, 0)" class="w-2 h-2 rounded-full bg-primary transition duration-300"></button>
                        <button onclick="showProductSlide(${p.id}, 1)" class="w-2 h-2 rounded-full bg-gray-400 transition duration-300"></button>
                    </div>` : ''}
                </div>
                <div class="flex-grow">
                    <p class="text-xs text-primary font-bold uppercase mb-1 tracking-widest">${p.category}</p>
                    <h4 class="text-lg md:text-xl font-bold truncate mb-1">${p.name}</h4>
                </div>
                <div class="flex flex-col sm:flex-row justify-between items-stretch sm:items-center pt-4 border-t border-gray-100 space-y-2 sm:space-y-0">
                    <button onclick="openProductDetails(${p.id})" class="btn-secondary px-3 py-2 text-xs sm:text-sm">View Details</button>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                        <button onclick="openPriceForm(${p.id})" class="btn-primary px-3 py-2 text-xs sm:text-sm flex items-center justify-center space-x-1">
                            ${WHATSAPP_ICON.replace('<svg', '<svg class="w-3 h-3 sm:w-4 sm:h-4"')}
                            <span>Check Price</span>
                        </button>
                        <button onclick="addToCart(${p.id})" class="btn-secondary px-3 py-2 text-xs sm:text-sm">Add to Cart</button>
                    </div>
                </div>
            </div>
        `).join('');
    } else {
        // Full render
        container.innerHTML = `
            <h2 class="text-4xl md:text-5xl font-light text-primary mb-8 text-center tracking-widest">AMS COLLECTIONS</h2>
            <div class="mb-8 flex justify-center">
                <input type="text" id="product-search" placeholder="Search products by name, category, or material..." value="${searchTerm}" class="w-full max-w-md px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition duration-200">
            </div>
            <p id="product-count" class="text-center text-gray-600 mb-6">${filteredProducts.length} Products</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8">
                ${filteredProducts.map(p => `
                    <div class="product-card bg-white p-4 md:p-6 rounded-lg shadow-lg flex flex-col justify-between border border-gray-100">
                        <div class="relative mb-4">
                            <div id="product-slideshow-${p.id}" class="relative h-48 rounded-sm overflow-hidden">
                                <img src="${p.image}" alt="${p.name}" class="w-full h-full object-cover" onclick="magnifyImage(this.src)" onerror="this.onerror=null; this.src='https://placehold.co/300x300/4A3222/ffffff?text=Image+Missing';">
                                ${p.sizeChart ? `<img src="${p.sizeChart}" alt="${p.name} Size Chart" class="w-full h-full object-cover hidden" onclick="magnifyImage(this.src)" onerror="this.onerror=null; this.src='https://placehold.co/300x300/4A3222/ffffff?text=Image+Missing';">` : ''}
                            </div>
                            ${p.sizeChart ? `<div id="product-nav-${p.id}" class="flex justify-center mt-2 space-x-1">
                                <button onclick="showProductSlide(${p.id}, 0)" class="w-2 h-2 rounded-full bg-primary transition duration-300"></button>
                                <button onclick="showProductSlide(${p.id}, 1)" class="w-2 h-2 rounded-full bg-gray-400 transition duration-300"></button>
                            </div>` : ''}
                        </div>
                        <div class="flex-grow">
                            <p class="text-xs text-primary font-bold uppercase mb-1 tracking-widest">${p.category}</p>
                            <h4 class="text-lg md:text-xl font-bold truncate mb-1">${p.name}</h4>
                        </div>
                        <div class="flex flex-col sm:flex-row justify-between items-stretch sm:items-center pt-4 border-t border-gray-100 space-y-2 sm:space-y-0">
                            <button onclick="openProductDetails(${p.id})" class="btn-secondary px-3 py-2 text-xs sm:text-sm">View Details</button>
                            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                                <button onclick="openPriceForm(${p.id})" class="btn-primary px-3 py-2 text-xs sm:text-sm flex items-center justify-center space-x-1">
                                    ${WHATSAPP_ICON.replace('<svg', '<svg class="w-3 h-3 sm:w-4 sm:h-4"')}
                                    <span>Check Price</span>
                                </button>
                                <button onclick="addToCart(${p.id})" class="btn-secondary px-3 py-2 text-xs sm:text-sm">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                `).join('')}
            </div>
        `;

        // Add search functionality
        const searchInput = document.getElementById('product-search');
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                const term = e.target.value.trim();
                renderProductsView(hash, term, true);
            });
        }
    }
}

        // --- Cart View Logic ---
        function renderCartView() {
            const container = document.getElementById('cart-view');
            const categoryCounts = cart.reduce((acc, item) => {
                acc[item.category] = (acc[item.category] || 0) + item.quantity;
                return acc;
            }, {});
            const summary = Object.entries(categoryCounts).map(([cat, count]) => `${cat}: ${count}`).join(', ');

            let cartItemsHTML = cart.map(item => `
                <div class="flex flex-col md:flex-row items-start md:items-center justify-between border-b py-6 hover:bg-gray-50 transition duration-150 rounded-sm px-2 -mx-2">
                    <div class="flex items-center space-x-6 w-full md:w-3/5 mb-4 md:mb-0">
                        <img src="${item.image}" alt="${item.name}" class="w-24 h-24 object-cover rounded-sm border border-gray-100" onclick="magnifyImage(this.src)">
                        <div>
                            <h4 class="font-semibold text-xl">${item.name}</h4>
                            <p class="text-sm text-gray-500">${item.material} Leather | ${item.type}</p>
                        <button onclick="openPriceForm(${item.id})" class="btn-primary px-2 py-1 text-xs flex items-center space-x-1 mt-1 md:hidden">
                                ${WHATSAPP_ICON.replace('<svg', '<svg class="w-3 h-3"')}
                                <span>Check Price</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between md:justify-end w-full md:w-2/5">
                        <button onclick="openPriceForm(${item.id})" class="btn-primary px-2 py-1 text-xs flex items-center space-x-1 hidden md:block">
                            ${WHATSAPP_ICON.replace('<svg', '<svg class="w-3 h-3"')}
                            <span>Check Price</span>
                        </button>

                        <div class="flex items-center border border-gray-300 rounded-sm ml-4">
                            <button onclick="updateCartItemQuantity(${item.id}, ${item.quantity - 1})" class="p-2 text-xl hover:bg-gray-100 rounded-l-sm" aria-label="Decrease quantity">-</button>
                            <input type="number" min="1" value="${item.quantity}" onchange="updateCartItemQuantity(${item.id}, this.value)" class="w-12 text-center border-x border-gray-300 focus:outline-none font-medium">
                            <button onclick="updateCartItemQuantity(${item.id}, ${item.quantity + 1})" class="p-2 text-xl hover:bg-gray-100 rounded-r-sm" aria-label="Increase quantity">+</button>
                        </div>

                        <button onclick="updateCartItemQuantity(${item.id}, 0)" class="text-red-500 hover:text-red-700 ml-6" aria-label="Remove item">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 7a1 1 0 011 1v7a1 1 0 11-2 0V8a1 1 0 011-1zm4 0a1 1 0 00-1 1v7a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </div>
            `).join('');

            if (cart.length === 0) {
                cartItemsHTML = `<p class="text-center text-xl py-20 text-gray-600">Your shopping bag is empty. <a href="#products" class="text-primary hover:underline font-semibold">Start browsing the collection.</a></p>`;
            }

            container.innerHTML = `
                <h2 class="text-5xl font-light text-primary mb-12 text-center tracking-widest">YOUR SHOPPING BAG</h2>
                <div class="md:grid md:grid-cols-3 md:gap-12">
                    <div class="md:col-span-2 bg-white p-8 rounded-lg shadow-xl border border-gray-100 mb-8 md:mb-0">
                        ${cartItemsHTML}
                    </div>

                    <div class="md:col-span-1">
                        <div class="bg-white p-8 rounded-lg shadow-xl border border-gray-100 sticky top-24">
                            <h3 class="text-2xl font-semibold mb-6 border-b pb-3">Order Summary</h3>
                            <div class="space-y-3 mb-6 text-gray-700">
                                <div>
                                    <span class="font-medium">Items Summary:</span>
                                    <p class="mt-2">${summary || 'No items'}</p>
                                </div>
                            </div>
                            <button ${cart.length === 0 ? 'disabled' : ''} onclick="openCartPriceForm()" class="btn-primary w-full py-4 text-lg ${cart.length === 0 ? 'opacity-50 cursor-not-allowed' : ''} flex items-center justify-center space-x-2">
                                ${WHATSAPP_ICON.replace('<svg', '<svg class="w-5 h-5"')}
                                <span>Check Prices via WhatsApp</span>
                            </button>
                            ${cart.length > 0 ? `<button onclick="clearCart()" class="w-full mt-4 text-sm text-gray-500 hover:text-red-500 transition duration-150">Empty Bag</button>` : ''}
                        </div>
                    </div>
                </div>
            `;
        }

        // --- 4. Review Slider Logic ---
        let reviewAutoScrollInterval;
        let leathersSlideIndex = 0;
        let leathersAutoScrollInterval;

        function renderReviews() {
            const slider = document.getElementById('review-slider');
            if (!slider) return;

            slider.innerHTML = REVIEWS.map(r => `
                <div class="review-card bg-white p-8 rounded-lg shadow-xl flex-shrink-0 snap-center border border-gray-100">
                    <div class="flex text-amber-500 mb-3 text-xl">
                        ${'&#9733;'.repeat(r.rating)}${'&#9734;'.repeat(5 - r.rating)}
                    </div>
                    <p class="text-gray-700 italic mb-5 leading-relaxed">"${r.text}"</p>
                    <p class="font-semibold text-right border-t pt-3 text-sm tracking-wider uppercase">${r.name}</p>
                </div>
            `).join('');
            
            // Start auto scroll after rendering
            startReviewAutoScroll();
            
            // Interaction listeners to pause/play
            const sliderWrapper = document.getElementById('reviews-section');
            sliderWrapper.addEventListener('mouseenter', stopReviewAutoScroll);
            sliderWrapper.addEventListener('mouseleave', startReviewAutoScroll);
        }

        function scrollReviews(direction) {
            const slider = document.getElementById('review-slider');
            if (!slider) return;
            const scrollDistance = slider.clientWidth * 0.95 * direction; 
            slider.scrollBy({ left: scrollDistance, behavior: 'smooth' });
        }

        // --- Auto-Slide Logic for Reviews ---
        function startReviewAutoScroll() {
            stopReviewAutoScroll(); // Clear any existing interval
            reviewAutoScrollInterval = setInterval(() => {
                const slider = document.getElementById('review-slider');
                if (!slider) return;
                
                const maxScrollLeft = slider.scrollWidth - slider.clientWidth;
                // If we are close to the end, loop back to start
                if (slider.scrollLeft >= maxScrollLeft - 5) {
                    slider.scrollTo({ left: 0, behavior: 'smooth' });
                } else {
                    // Scroll by approx one card width (90% + margin)
                    const cardWidth = slider.querySelector('.review-card').clientWidth;
                    const gap = 32; // 2rem margin
                    slider.scrollBy({ left: cardWidth + gap, behavior: 'smooth' });
                }
            }, 4000); // 4 seconds
        }

        function stopReviewAutoScroll() {
            clearInterval(reviewAutoScrollInterval);
        }

        // --- Imported Leathers Zigzag Layout ---
        function renderImportedLeathers() {
            const container = document.getElementById('imported-leathers-container');
            if (!container) return;

            container.innerHTML = IMPORTED_LEATHERS.map((leather, index) => {
                const isEven = index % 2 === 0;
                const imageOrder = isEven ? 'md:order-1' : 'md:order-2';
                const textOrder = isEven ? 'md:order-2' : 'md:order-1';
                return `
                    <div class="flex flex-col md:flex-row items-center space-y-8 md:space-y-0 md:space-x-12 mb-12">
                        <img src="${leather.image}" alt="${leather.name}" class="w-full md:w-1/2 h-64 object-cover rounded-lg shadow-lg ${imageOrder}" onerror="this.onerror=null; this.src='https://placehold.co/600x400/4A3222/ffffff?text=Image+Missing';">
                        <div class="w-full md:w-1/2 text-center md:text-left ${textOrder}">
                            <h2 class="text-2xl md:text-4xl font-light text-primary mb-4 tracking-wider">
                                ${leather.name}
                            </h2>
                            <p class="text-sm md:text-lg text-gray-600 mb-8 font-light">
                                ${leather.description}
                            </p>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // --- 5. Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize dynamic components on load
            renderReviews();
            renderImportedLeathers();
            updateCartCount();

            // Mobile Menu Toggle
            document.getElementById('mobile-menu-btn').addEventListener('click', () => {
                document.getElementById('mobile-menu').classList.toggle('hidden');
            });

            // SPA Routing
            window.addEventListener('hashchange', router);
            router();

            // Form submission for WhatsApp
            document.getElementById('price-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const productId = document.getElementById('product-id').value;
                const name = e.target.elements.name.value;
                const email = e.target.elements.email.value;
                const phone = e.target.elements.phone.value;
                const message = e.target.elements.message.value;
                let text;

                if (productId === 'cart') {
                    const cartItems = cart.map(item => ` ${item.name} (${item.quantity}x)`).join('\n');
                    text = `*Hi,*\n\n*I'm interested in the following items from my cart:*\n${cartItems}\n\n*My Details:*\nName: ${name}\nEmail: ${email}\nPhone: ${phone}${message ? '\nMessage: ' + message : ''}`;
                } else {
                    const product = PRODUCTS.find(p => p.id === parseInt(productId));
                    text = `*Hi,*\n\n*I'm interested in:*\n${product.name} (${product.category}, ${product.material} Leather)\n\n*My Details:*\nName: ${name}\nEmail: ${email}\nPhone: ${phone}${message ? '\nMessage: ' + message : ''}`;
                }

                // Send via WhatsApp
                const encoded = encodeURIComponent(text);
                const url = `https://wa.me/+917305632131?text=${encoded}`;
                window.open(url, '_blank');

                closeModal();
                e.target.reset();
            });

            // Form submission for Review
            document.getElementById('review-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const name = e.target.elements.name.value;
                const email = e.target.elements.email.value;
                const message = e.target.elements.message.value;

                const subject = 'New Review from AMS Website';
                const body = `Name: ${name}\nEmail: ${email}\nReview: ${message}`;
                const mailto = `mailto:dhanushharidoss47@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;

                window.location.href = mailto;
                showToast('Review submitted! Your email client has opened.', 'success');
                e.target.reset();
            });
        });

        // --- Price Check Modal Functions ---
        function openPriceForm(productId) {
            const product = PRODUCTS.find(p => p.id === productId);
            if (product) {
                document.getElementById('product-image').src = product.image;
            }
            document.getElementById('product-id').value = productId;
            document.getElementById('price-modal').classList.remove('hidden');
        }

        function openCartPriceForm() {
            // Hide product image for cart modal
            document.getElementById('product-image').style.display = 'none';
            document.getElementById('product-id').value = 'cart';
            document.getElementById('price-modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('price-modal').classList.add('hidden');
            // Reset modal state
            document.getElementById('product-image').style.display = 'block';
        }

        // --- Product Details Modal Functions ---
        let detailsSlideIndex = 0;

        function openProductDetails(productId) {
            const product = PRODUCTS.find(p => p.id === productId);
            if (product) {
                document.getElementById('details-title').textContent = product.name;
                document.getElementById('details-category').textContent = product.category;
                document.getElementById('details-material').textContent = `${product.material} | ${product.type}`;
                document.getElementById('details-description').textContent = product.description;
                document.getElementById('details-product-id').value = productId;

                // Generate slideshow images
                const images = [product.image];
                if (product.sizeChart) images.push(product.sizeChart);

                document.getElementById('details-slideshow').innerHTML = images.map((img, index) => `
                    <img src="${img}" alt="${product.name}" class="w-full h-full object-cover ${index === 0 ? '' : 'hidden'}" onclick="magnifyImage(this.src)" onerror="this.onerror=null; this.src='https://placehold.co/300x300/4A3222/ffffff?text=Image+Missing';">
                `).join('');

                // Generate navigation
                document.getElementById('details-nav').innerHTML = images.map((_, index) => `
                    <button onclick="showDetailsSlide(${index})" class="w-3 h-3 rounded-full transition duration-300 ${index === 0 ? 'bg-white' : 'bg-gray-400'}"></button>
                `).join('');

                detailsSlideIndex = 0;
                document.getElementById('product-details-modal').classList.remove('hidden');
            }
        }

        function showDetailsSlide(n) {
            const slides = document.querySelectorAll('#details-slideshow img');
            const navs = document.querySelectorAll('#details-nav button');

            if (slides.length === 0) return;

            if (n >= slides.length) detailsSlideIndex = 0;
            else if (n < 0) detailsSlideIndex = slides.length - 1;
            else detailsSlideIndex = n;

            slides.forEach(s => s.classList.add('hidden'));
            navs.forEach(b => b.classList.remove('bg-white').classList.add('bg-gray-400'));

            slides[detailsSlideIndex].classList.remove('hidden');
            navs[detailsSlideIndex].classList.remove('bg-gray-400').classList.add('bg-white');
        }

        function closeProductDetailsModal() {
            document.getElementById('product-details-modal').classList.add('hidden');
        }

        // --- Product Slideshow Functions ---
        function showProductSlide(productId, slideIndex) {
            const slideshow = document.getElementById(`product-slideshow-${productId}`);
            const images = slideshow.querySelectorAll('img');
            const navButtons = document.querySelectorAll(`#product-nav-${productId} button`);

            if (images.length === 0) return;

            // Hide all images
            images.forEach(img => img.classList.add('hidden'));
            // Show the selected image
            images[slideIndex].classList.remove('hidden');

            // Update nav buttons
            navButtons.forEach((btn, index) => {
                if (index === slideIndex) {
                    btn.classList.remove('bg-gray-400');
                    btn.classList.add('bg-primary');
                } else {
                    btn.classList.remove('bg-primary');
                    btn.classList.add('bg-gray-400');
                }
            });
        }

        // --- Image Magnification Functions ---
        function magnifyImage(src) {
            document.getElementById('magnified-image').src = src;
            document.getElementById('magnify-modal').classList.remove('hidden');
        }

        function closeMagnifyModal() {
            document.getElementById('magnify-modal').classList.add('hidden');
        }
    </script>

    <!-- Price Check Modal -->
    <div id="price-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white p-8 rounded-lg shadow-2xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <h3 class="text-2xl font-semibold mb-6 text-primary">Check the Price</h3>
            <img id="product-image" src="" alt="Product Image" class="w-full h-48 object-cover rounded-sm mb-6" onerror="this.onerror=null; this.src='https://placehold.co/300x300/4A3222/ffffff?text=Image+Missing';">
            <form id="price-form">
                <input type="hidden" id="product-id">
                <div class="mb-4">
                    <label for="name" class="block font-medium mb-2 text-sm uppercase tracking-wider">Name</label>
                    <input type="text" id="name" name="name" required class="w-full p-3 border border-gray-300 rounded-sm focus:ring-primary focus:border-primary transition duration-150">
                </div>
                <div class="mb-4">
                    <label for="email" class="block font-medium mb-2 text-sm uppercase tracking-wider">Email</label>
                    <input type="email" id="email" name="email" class="w-full p-3 border border-gray-300 rounded-sm focus:ring-primary focus:border-primary transition duration-150">
                </div>
                <div class="mb-4">
                    <label for="phone" class="block font-medium mb-2 text-sm uppercase tracking-wider">Phone</label>
                    <input type="tel" id="phone" name="phone" required class="w-full p-3 border border-gray-300 rounded-sm focus:ring-primary focus:border-primary transition duration-150">
                </div>
                <div class="mb-6">
                    <label for="message" class="block font-medium mb-2 text-sm uppercase tracking-wider">Message (Optional)</label>
                    <textarea id="message" name="message" class="w-full p-3 border border-gray-300 rounded-sm focus:ring-primary focus:border-primary transition duration-150 h-20 resize-none"></textarea>
                </div>
                <div class="flex justify-end space-x-3">
                    <button type="button" onclick="closeModal()" class="btn-secondary py-2 px-4 text-sm">Cancel</button>
                    <button type="submit" class="btn-primary py-2 px-4 text-sm flex items-center space-x-2">
                        <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/></svg>
                        <span>Send via WhatsApp</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Product Details Modal -->
    <div id="product-details-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white p-8 rounded-lg shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-start mb-6">
                <h3 id="details-title" class="text-3xl font-semibold text-primary"></h3>
                <button onclick="closeProductDetailsModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="relative">
                    <div id="details-slideshow" class="relative h-64 rounded-sm overflow-hidden">
                        <!-- Slides will be generated by JS -->
                    </div>
                    <!-- Slideshow Navigation -->
                    <div id="details-nav" class="flex justify-center mt-4 space-x-2">
                        <!-- Navigation buttons will be generated by JS -->
                    </div>
                </div>
                <div>
                    <p id="details-category" class="text-sm text-primary font-bold uppercase mb-2"></p>
                    <p id="details-material" class="text-sm text-gray-600 mb-4"></p>
                    <p id="details-description" class="text-gray-700 mb-6 leading-relaxed"></p>
                    <div class="flex justify-between items-center">
                        <button onclick="addToCart(document.getElementById('details-product-id').value)" class="btn-primary px-6 py-3">Add to Cart</button>
                        <button onclick="openPriceForm(document.getElementById('details-product-id').value); closeProductDetailsModal()" class="btn-secondary px-6 py-3">Check Price</button>
                    </div>
                </div>
                <input type="hidden" id="details-product-id">
            </div>
        </div>
    </div>

    <!-- Image Magnify Modal -->
    <div id="magnify-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden flex items-center justify-center z-50">
        <div class="relative max-w-4xl max-h-[90vh]">
            <img id="magnified-image" src="" alt="Magnified Image" class="max-w-full max-h-full object-contain">
            <button onclick="closeMagnifyModal()" class="absolute top-4 right-4 text-white text-3xl hover:text-gray-300">&times;</button>
        </div>
    </div>
</body>
</html>             


